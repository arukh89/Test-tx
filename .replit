# .replit - TX Battle Royale (Hybrid config)
# Tujuan: Jalankan backend (backend/server.js) di Replit dengan port mapping jelas.
# Frontend tetap di Netlify: https://testtx.netlify.app

# Perintah default ketika tombol ▶️ Run ditekan:
# 1. Jika backend/node_modules belum ada → install dependency sekali.
# 2. Masuk ke folder backend, lalu jalankan server.js.
run = "bash -lc 'if [ ! -d backend/node_modules ]; then echo \"Installing backend dependencies...\"; cd backend && npm install; fi; cd backend && node server.js'"

# Bahasa/lingkungan
language = "nodejs"

# Gunakan Node versi modern
[env]
NODE_VERSION = "18"

# Mapping port:
# - Backend: localPort 3001 → externalPort 3001 (untuk Socket.IO / API)
# - Opsional: frontend proxy di root (server.js) akan listen di 5000, dipetakan ke 80 (HTTP default).
[[ports]]
localPort = 3001
externalPort = 3001

[[ports]]
localPort = 5000
externalPort = 80

# Catatan:
# - Jangan ketik `run = "..."` di shell. Baris di atas hanya untuk file ini.
# - Kalau nanti kamu ingin jalankan frontend+backend bareng di Replit,
#   ubah run jadi: run = "bash -lc 'if [ ! -d node_modules ]; then npm install; fi; npm start'"
#   (asumsinya root package.json punya script "start": "node server.js").
